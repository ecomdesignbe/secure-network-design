# iSCSI Client Configuration (Ubuntu/Debian)
# Objective: Connect to the iSCSI target at 192.168.60.12

# Step 1 – Installing the iSCSI Initiator Package
sudo apt update
sudo apt install open-iscsi -y

# Step 2 – Scanning available targets
sudo iscsiadm -m discovery -t sendtargets -p 192.168.60.12

# Expected output (example):
# 192.168.60.12:3260,1 iqn.2025-07.local.company:storage.disk1

# Step 3 – Login to the target (assuming CHAP authentication)
sudo iscsiadm -m node -T iqn.2025-07.local.company:storage.disk1 -p 192.168.60.12 --op update -n node.session.auth.authmethod -v CHAP
sudo iscsiadm -m node -T iqn.2025-07.local.company:storage.disk1 -p 192.168.60.12 --op update -n node.session.auth.username -v admin
sudo iscsiadm -m node -T iqn.2025-07.local.company:storage.disk1 -p 192.168.60.12 --op update -n node.session.auth.password -v StrongPass123

# Step 4 – Connection to the target
sudo iscsiadm -m node -T iqn.2025-07.local.company:storage.disk1 -p 192.168.60.12 --login

# Step 5 – Checking the connection
lsblk
# The new disk should appear as /dev/sdX (es. /dev/sdb)

# (Optional) Step 6 – Formatting and Mounting
sudo mkfs.ext4 /dev/sdX
sudo mkdir /mnt/iscsi
sudo mount /dev/sdX /mnt/iscsi

# Step 7 – Autostart at boot
sudo iscsiadm -m node -T iqn.2025-07.local.company:storage.disk1 -p 192.168.60.12 --op update -n node.startup -v automatic

#Change iqn and password according to actual configurations.